!function(){"use strict";var e=function(){return function(e){var t=this;this.getDetailHtml=function(e){return"<div style='text-align: center; padding: 10px;'><div style='width: 100%; height: 180px; overflow: hidden;'><img width='130px' src=' "+e.img+"' /></div><p>"+e.title+"</p><a style='width: 100%;height: 30px;background: #00adff;text-decoration: none;line-height: 30px;color: white;font-weight: bold;border-radius: 5px; display: block;' href='"+e.url+"' target='_blank'>Buy</a></div>"},this.showDetails=function(e,o,i,n){t.removeAllAdsDetail();var a=document.querySelector(t.selector),r=document.createElement("div"),s=document.createElement("div"),l=document.createElement("div");l.className="ads-detail-close",l.innerHTML="X",l.setAttribute("style","width: 10px;height: 10px;right: 5px;top: 5px;line-height: 10px;text-align: center;color: #000;border: 1px solid #000;position: absolute;font-size: 12px;font-weight: bold;padding: 3px;cursor: pointer;"),r.className="ads-detail",r.id=e+"-ads-detail",s.innerHTML=t.getDetailHtml(n),r.setAttribute("style","left: "+o+"px; top: "+i+"px;position: absolute;width: 200px;height: 300px;background: rgba(255, 255, 255, 0.8);padding: 5px;border-radius: 2px;overflow: hidden;"),r.addEventListener("click",function(o){"ads-detail-close"===o.target.className&&t.removeAdsDetail(e)}),s.className="ads-content",s.setAttribute("style","position: relative;background: white;"),s.append(l),r.appendChild(s),a.appendChild(r)},this.removeAllAdsDetail=function(){for(var e=document.querySelectorAll(t.selector+" .ads-detail"),o=0;o<e.length;o++)e[o]&&e[o].parentNode.removeChild(e[o])},this.removeAdsDetail=function(e){var o=document.querySelector(t.selector+" #"+e+"-ads-detail");o&&o.parentNode.removeChild(o)},this.selector=e.selector}}(),t=function(){return function(t){var o=this;this.getYPosition=function(e){var t=e-280;return t>10?t:10},this.getXPosition=function(e,t){var o=document.querySelector(t);return e+150>(o?o.offsetWidth:0)-10?e-210:e+30},this.showIcon=function(e,t,i,n){var a=o,r=document.querySelector(o.selector),s=document.createElement("div");s.className="ads-icon",s.id=e,s.innerHTML="+",s.setAttribute("style","position: absolute;border: 4px solid rgba(255, 255, 255, 0.5);border-radius: 20px;width: 20px;height: 20px;color: white;font-size: 20px;font-weight: bold;text-align: center;line-height: 20px;cursor: pointer;left: "+t+"px; top: "+i+"px"),s.addEventListener("click",function(r){o.AdsDetailPopUp.showDetails(e,o.getXPosition(t,a.selector),o.getYPosition(i),n)}),r.appendChild(s)},this.removeIcon=function(e){o.AdsDetailPopUp.removeAdsDetail(e);var t=document.querySelector(o.selector+" #"+e);t&&t.parentNode.removeChild(t)},this.selector=t.selector,this.AdsDetailPopUp=new e({selector:this.selector})}}(),o=function(){return function(e){var o=this;this.setAdsData=function(e){o.data=e},this.onReady=function(){switch(document.querySelector(o.selector).setAttribute("style","position: relative;"),o.type.mediaType){case"YOUTUBE_VIDEO":"SHOPPABLE"!==o.type.category&&"ADD_TO_CART"!==o.type.category||o.showAdsOnYouTubeVideo();break;case"IMAGE":"SHOPPABLE"!==o.type.category&&"ADD_TO_CART"!==o.type.category||o.showAdsOnImage()}},this.showAdsOnYouTubeVideo=function(){window.onYouTubeIframeAPIReady=o.onYouTubeIframeAPIReady},this.showAdsOnImage=function(){for(var e=0;e<o.data.length;e++){var t=o.data[e];o.AdsIconIns.showIcon(t.id,t.positionPx.left,t.positionPx.top,t.content)}},this.setTimeLookup=function(){var e=o;o.interval=setInterval(function(){for(var t=Math.floor(e.player.getCurrentTime()),o=0;o<e.data.length;o++){var i=e.data[o];t===i.timestamp?(e.enablePause&&e.player.pauseVideo(),e.AdsIconIns.showIcon(i.id,i.positionPx.left,i.positionPx.top,i.content)):e.AdsIconIns.removeIcon(i.id)}},1e3)},this.onYouTubeIframeAPIReady=function(){var e=document.querySelector(o.selector+" iframe");o.player=new window.YT.Player(e.id,{events:{onReady:o.onPlayerReady,onStateChange:o.onPlayerStateChange}})},this.onPlayerReady=function(){console.log("YouTube player is ready")},this.onPlayerStateChange=function(e){1===e.data?o.setTimeLookup():2===e.data&&clearInterval(o.interval)},this.type={mediaType:e.type.mediaType,category:e.type.category},this.player=null,this.selector=e.selector,this.interval=null,this.enablePause=e.enablePause,this.AdsIconIns=new t({selector:this.selector}),this.data=e.data}}();window.ShoppableAds=function(e){return new o(e)}}();
